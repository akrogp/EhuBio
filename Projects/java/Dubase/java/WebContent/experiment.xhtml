<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

<h:head></h:head> 
<h:body>
	<ui:composition template="/WEB-INF/templates/menupage.xhtml">
		<ui:define name="title">Experiment #{experimentView.entity.fmtId}</ui:define>
		<ui:define name="content">
			<p:panelGrid columns="2">
				<h:outputText value="Publication" styleClass="leftheader"/>
				<h:outputLink value="#{experimentView.doi}" target="_blank">#{experimentView.entity.title}</h:outputLink>
				
				<h:outputText value="Enzyme" styleClass="leftheader"/>
				<h:outputText value="#{experimentView.entity.enzymeBean.gene} (#{experimentView.entity.enzymeBean.superfamilyBean.name})" />
				
				<h:outputText value="Description" styleClass="leftheader"/>
				<h:outputText value="#{experimentView.entity.description}"/>
				
				<h:outputText value="Publication date" styleClass="leftheader"/>
				<h:outputText value="#{experimentView.entity.expDate}" />
				
				<h:outputText value="Uploaded into DUBase" styleClass="leftheader"/>
				<h:outputText value="#{experimentView.entity.pubDate}" />
				
				<h:outputText value="Submitted by" styleClass="leftheader"/>
				<h:panelGroup>
					#{experimentView.entity.authorBean.name} <a href="mailto:#{experimentView.entity.authorBean.mail}">&lt;#{experimentView.entity.authorBean.mail}&gt;</a>
					&ndash; #{experimentView.entity.authorBean.affiliation}
				</h:panelGroup>
				
				<h:outputText value="Cell" styleClass="leftheader"/>
				<h:outputText value="#{experimentView.entity.cellBean.name}" />
				
				<h:outputText value="Organism" styleClass="leftheader"/>
				<h:panelGroup>
					#{experimentView.entity.cellBean.taxonBean.commonName} (<i>#{experimentView.entity.cellBean.taxonBean.sciName}</i>)
				</h:panelGroup>
				
				<h:outputText value="Method" styleClass="leftheader"/>
				<h:panelGroup rendered="#{experimentView.proteomics}">
					<p:panelGrid columns="2">
						<h:outputText value="Type" styleClass="leftheader"/>
						<h:outputText value="#{experimentView.methodType}" />
						
						<h:outputText value="Proteasome inhibition" styleClass="leftheader"/>
						<h:outputText value="#{experimentView.entity.methodBean.proteasomeInhibition}" />
						
						<h:outputText value="Description" styleClass="leftheader"/>
						<h:outputText value="#{experimentView.entity.methodBean.description}" escape="false"/>
						
						<h:outputText value="Column type" styleClass="leftheader"/>
						<h:outputText value="#{experimentView.entity.methodBean.columnType}" />
						
						<h:outputText value="Instrument" styleClass="leftheader"/>
						<h:outputText value="#{experimentView.entity.methodBean.instrument}" />
						
						<h:outputText value="Fold threshold (log2)" styleClass="leftheader"/>
						<h:outputText value="#{formats.decimal2(experimentView.entity.methodBean.log2FoldThreshold)}" />
						
						<h:outputText value="p-value threshold" styleClass="leftheader"/>
						<h:outputText value="#{experimentView.entity.methodBean.pvalueThreshold}" />										
					</p:panelGrid>
					<p/>
					<h:form target="volcano">
						<p:commandButton value="Volcano" ajax="false" action="#{experimentView.volcano()}"/>
					</h:form>
				</h:panelGroup>
				
				<p:panelGrid columns="2" rendered="#{not experimentView.proteomics}">
					<h:outputText value="Type" styleClass="leftheader"/>
					<h:outputText value="#{experimentView.methodType}" />
					
					<h:outputText value="Proteasome inhibition" styleClass="leftheader"/>
					<h:outputText value="#{experimentView.entity.methodBean.proteasomeInhibition}" />
				</p:panelGrid>
				
				<h:outputText value="Experimental conditions" rendered="#{not experimentView.manual}" styleClass="leftheader"/>
				<p:panelGrid rendered="#{not experimentView.manual}">
					<ui:repeat var="cond" value="#{experimentView.entity.conditions}">
						<p:row>
							<p:column>#{cond.name}</p:column>
							<p:column>
								<p:panelGrid columns="2">
									<h:outputText value="Description" styleClass="leftheader"/>
									<h:outputText value="#{cond.description}" />
									
									<h:outputText value="Control" styleClass="leftheader"/>
									<h:outputText value="#{cond.control}" />
									
									<h:outputText value="Replicate type" styleClass="leftheader"/>
									<h:outputText value="#{cond.replicateType}" />
									
									<h:outputText value="Replicates" styleClass="leftheader"/>
									<h:panelGroup>
										<ui:repeat var="rep" value="#{cond.replicates}">#{rep.name}<br/></ui:repeat>
									</h:panelGroup>
								</p:panelGrid>
							</p:column>
						</p:row>
					</ui:repeat>
				</p:panelGrid>
				
				<h:outputText value="Supporting files" styleClass="leftheader"/>
				<h:form>
					<p:panelGrid>
						<p:row>
							<p:column styleClass="topheader">Type</p:column>
							<p:column styleClass="topheader">Name</p:column>							
						</p:row>
						<ui:repeat var="file" value="#{experimentView.entity.supportingFiles}">
							<p:row>
								<p:column>#{file.fileType.description}</p:column>
								<p:column>								
										<p:commandLink ajax="false" value="#{file.name}" action="#{experimentView.download(file)}" rendered="#{empty file.url}"/>
										<h:outputLink value="#{file.url}" target="_blank" rendered="#{not empty file.url}">#{file.name}</h:outputLink>								
								</p:column>								
							</p:row>
						</ui:repeat>
					</p:panelGrid>
				</h:form>
			</p:panelGrid>
		</ui:define>
	</ui:composition>
</h:body> 
</html>
